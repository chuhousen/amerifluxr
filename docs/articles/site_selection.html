<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Site selection • amerifluxr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Site selection">
<meta property="og:description" content="amerifluxr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">amerifluxr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/data_import.html">Data Import</a>
    </li>
    <li>
      <a href="../articles/site_selection.html">Site selection</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/chuhousen/amerifluxr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="site_selection_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Site selection</h1>
                        <h4 class="author">Housen Chu</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/chuhousen/amerifluxr/blob/master/vignettes/site_selection.Rmd"><code>vignettes/site_selection.Rmd</code></a></small>
      <div class="hidden name"><code>site_selection.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/chuhousen/amerifluxr">amerifluxr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com">data.table</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://rapporter.github.io/pander">pander</a></span><span class="op">)</span></code></pre></div>
<p>amerifluxr is a programmatic interface to the <a href="https://ameriflux.lbl.gov/">AmeriFlux</a>. This vignette demonstrates examples to query a list of target sites based on sites’ general information and availability of metadata and data. A companion vignette for <a href="data_import.html">Data import</a> is available as well.</p>
<div id="get-a-site-list-with-general-info" class="section level2">
<h2 class="hasAnchor">
<a href="#get-a-site-list-with-general-info" class="anchor"></a>Get a site list with general info</h2>
<p>AmeriFlux data are organized by individual sites. Typically, data query begins with site search and selection. A full list of AmeriFlux sites with general info can be obtained using the amf_site_info() function.</p>
<p>Convert the site list to a data.table for easier manipulation. Also see <a href="https://ameriflux.lbl.gov/data/badm/badm-standards/">link</a> for variable definition.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get a full list of sites with general info</span>
<span class="va">sites</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/amf_site_info.html">amf_site_info</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">sites_dt</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html">as.data.table</a></span><span class="op">(</span><span class="va">sites</span><span class="op">)</span>

<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">sites_dt</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>, <span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="13%">
<col width="39%">
<col width="16%">
<col width="20%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="center">SITE_ID</th>
<th align="center">SITE_NAME</th>
<th align="center">COUNTRY</th>
<th align="center">STATE</th>
<th align="center">IGBP</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">AR-CCa</td>
<td align="center">Carlos Casares agriculture</td>
<td align="center">Argentina</td>
<td align="center">Buenos Aires</td>
<td align="center">CRO</td>
</tr>
<tr class="even">
<td align="center">AR-CCg</td>
<td align="center">Carlos Casares grassland</td>
<td align="center">Argentina</td>
<td align="center">Buenos Aires</td>
<td align="center">GRA</td>
</tr>
<tr class="odd">
<td align="center">AR-TF1</td>
<td align="center">Rio Moat bog</td>
<td align="center">Argentina</td>
<td align="center">NA</td>
<td align="center">WET</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="18%">
<col width="65%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th align="center">TOWER_BEGAN</th>
<th align="center">URL_AMERIFLUX</th>
<th align="center">TOWER_END</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">2012</td>
<td align="center"><a href="https://ameriflux.lbl.gov/sites/siteinfo/AR-CCa" class="uri">https://ameriflux.lbl.gov/sites/siteinfo/AR-CCa</a></td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">2018</td>
<td align="center"><a href="https://ameriflux.lbl.gov/sites/siteinfo/AR-CCg" class="uri">https://ameriflux.lbl.gov/sites/siteinfo/AR-CCg</a></td>
<td align="center">NA</td>
</tr>
<tr class="odd">
<td align="center">2016</td>
<td align="center"><a href="https://ameriflux.lbl.gov/sites/siteinfo/AR-TF1" class="uri">https://ameriflux.lbl.gov/sites/siteinfo/AR-TF1</a></td>
<td align="center">2018</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="18%">
<col width="20%">
<col width="20%">
<col width="22%">
<col width="8%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="center">LOCATION_LAT</th>
<th align="center">LOCATION_LONG</th>
<th align="center">LOCATION_ELEV</th>
<th align="center">CLIMATE_KOEPPEN</th>
<th align="center">MAT</th>
<th align="center">MAP</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">-35.62</td>
<td align="center">-61.32</td>
<td align="center">83</td>
<td align="center">Cfa</td>
<td align="center">16.1</td>
<td align="center">1060</td>
</tr>
<tr class="even">
<td align="center">-35.92</td>
<td align="center">-61.19</td>
<td align="center">84</td>
<td align="center">Cfa</td>
<td align="center">16.1</td>
<td align="center">1060</td>
</tr>
<tr class="odd">
<td align="center">-54.97</td>
<td align="center">-66.73</td>
<td align="center">40</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="19%">
<col width="18%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="center">DATA_POLICY</th>
<th align="center">DATA_START</th>
<th align="center">DATA_END</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">LEGACY</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">LEGACY</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="odd">
<td align="center">CCBY4.0</td>
<td align="center">2016</td>
<td align="center">2018</td>
</tr>
</tbody>
</table>
<p>The site list provides a quick summary of all registered sites and sites with available data.</p>
<p>It’s often important to understand the data use policy under which the data are shared. In 2021, the AmeriFlux community moved to the AmeriFlux CC-BY-4.0 License. Most site PIs now share their sites’ data under the CC-BY-4.0 license. Data for some sites are shared under the historical AmeriFlux data-sharing policy, now called the AmeriFlux Legacy Data Policy.</p>
<p>Check <a href="https://ameriflux.lbl.gov/data/data-policy/#data-use">link</a> for data use policy and attribution guidelines.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># total number of registered sites</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">sites_dt</span><span class="op">[</span>, <span class="va">.N</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup><col width="8%"></colgroup>
<tbody><tr class="odd">
<td align="center">560</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># total number of sites with available data</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">sites_dt</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">DATA_START</span><span class="op">)</span>, <span class="va">.N</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup><col width="8%"></colgroup>
<tbody><tr class="odd">
<td align="center">410</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># get number of sites with available data, grouped by data use policy</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">sites_dt</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">DATA_START</span><span class="op">)</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">DATA_POLICY</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="19%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="center">DATA_POLICY</th>
<th align="center">N</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">CCBY4.0</td>
<td align="center">305</td>
</tr>
<tr class="even">
<td align="center">LEGACY</td>
<td align="center">105</td>
</tr>
</tbody>
</table>
<p>Further group sites based on <a href="https://ameriflux.lbl.gov/data/badm/badm-standards/IGBP">IGBP</a>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get a summary table of sites grouped by IGBP</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">sites_dt</span><span class="op">[</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="st">"IGBP"</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="9%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="center">IGBP</th>
<th align="center">N</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">CRO</td>
<td align="center">109</td>
</tr>
<tr class="even">
<td align="center">GRA</td>
<td align="center">78</td>
</tr>
<tr class="odd">
<td align="center">WET</td>
<td align="center">94</td>
</tr>
<tr class="even">
<td align="center">DNF</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">EBF</td>
<td align="center">10</td>
</tr>
<tr class="even">
<td align="center">WSA</td>
<td align="center">9</td>
</tr>
<tr class="odd">
<td align="center">ENF</td>
<td align="center">99</td>
</tr>
<tr class="even">
<td align="center">DBF</td>
<td align="center">58</td>
</tr>
<tr class="odd">
<td align="center">MF</td>
<td align="center">14</td>
</tr>
<tr class="even">
<td align="center">OSH</td>
<td align="center">39</td>
</tr>
<tr class="odd">
<td align="center">WAT</td>
<td align="center">9</td>
</tr>
<tr class="even">
<td align="center">CSH</td>
<td align="center">12</td>
</tr>
<tr class="odd">
<td align="center">URB</td>
<td align="center">8</td>
</tr>
<tr class="even">
<td align="center">BSV</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">SAV</td>
<td align="center">8</td>
</tr>
<tr class="even">
<td align="center">CVM</td>
<td align="center">5</td>
</tr>
<tr class="odd">
<td align="center">SNO</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># get a summary table of sites with available data, &amp; grouped by IGBP</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">sites_dt</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">DATA_START</span><span class="op">)</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="st">"IGBP"</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="9%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="center">IGBP</th>
<th align="center">N</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">WET</td>
<td align="center">50</td>
</tr>
<tr class="even">
<td align="center">DNF</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">WSA</td>
<td align="center">7</td>
</tr>
<tr class="even">
<td align="center">EBF</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">ENF</td>
<td align="center">93</td>
</tr>
<tr class="even">
<td align="center">DBF</td>
<td align="center">54</td>
</tr>
<tr class="odd">
<td align="center">MF</td>
<td align="center">12</td>
</tr>
<tr class="even">
<td align="center">CRO</td>
<td align="center">63</td>
</tr>
<tr class="odd">
<td align="center">GRA</td>
<td align="center">61</td>
</tr>
<tr class="even">
<td align="center">OSH</td>
<td align="center">31</td>
</tr>
<tr class="odd">
<td align="center">CSH</td>
<td align="center">11</td>
</tr>
<tr class="even">
<td align="center">BSV</td>
<td align="center">4</td>
</tr>
<tr class="odd">
<td align="center">CVM</td>
<td align="center">2</td>
</tr>
<tr class="even">
<td align="center">SAV</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">WAT</td>
<td align="center">6</td>
</tr>
<tr class="even">
<td align="center">URB</td>
<td align="center">2</td>
</tr>
<tr class="odd">
<td align="center">SNO</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># get a summary table of sites with available data, </span>
<span class="co">#  &amp; grouped by data use policy &amp; IGBP</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">sites_dt</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">DATA_START</span><span class="op">)</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">IGBP</span>, <span class="va">DATA_POLICY</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="9%">
<col width="19%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="center">IGBP</th>
<th align="center">DATA_POLICY</th>
<th align="center">N</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">WET</td>
<td align="center">CCBY4.0</td>
<td align="center">34</td>
</tr>
<tr class="even">
<td align="center">DNF</td>
<td align="center">CCBY4.0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">WSA</td>
<td align="center">CCBY4.0</td>
<td align="center">5</td>
</tr>
<tr class="even">
<td align="center">EBF</td>
<td align="center">LEGACY</td>
<td align="center">4</td>
</tr>
<tr class="odd">
<td align="center">ENF</td>
<td align="center">CCBY4.0</td>
<td align="center">68</td>
</tr>
<tr class="even">
<td align="center">DBF</td>
<td align="center">CCBY4.0</td>
<td align="center">48</td>
</tr>
<tr class="odd">
<td align="center">WET</td>
<td align="center">LEGACY</td>
<td align="center">16</td>
</tr>
<tr class="even">
<td align="center">MF</td>
<td align="center">CCBY4.0</td>
<td align="center">7</td>
</tr>
<tr class="odd">
<td align="center">CRO</td>
<td align="center">CCBY4.0</td>
<td align="center">49</td>
</tr>
<tr class="even">
<td align="center">MF</td>
<td align="center">LEGACY</td>
<td align="center">5</td>
</tr>
<tr class="odd">
<td align="center">ENF</td>
<td align="center">LEGACY</td>
<td align="center">25</td>
</tr>
<tr class="even">
<td align="center">GRA</td>
<td align="center">LEGACY</td>
<td align="center">15</td>
</tr>
<tr class="odd">
<td align="center">GRA</td>
<td align="center">CCBY4.0</td>
<td align="center">46</td>
</tr>
<tr class="even">
<td align="center">OSH</td>
<td align="center">LEGACY</td>
<td align="center">9</td>
</tr>
<tr class="odd">
<td align="center">OSH</td>
<td align="center">CCBY4.0</td>
<td align="center">22</td>
</tr>
<tr class="even">
<td align="center">CRO</td>
<td align="center">LEGACY</td>
<td align="center">14</td>
</tr>
<tr class="odd">
<td align="center">CSH</td>
<td align="center">LEGACY</td>
<td align="center">5</td>
</tr>
<tr class="even">
<td align="center">WSA</td>
<td align="center">LEGACY</td>
<td align="center">2</td>
</tr>
<tr class="odd">
<td align="center">EBF</td>
<td align="center">CCBY4.0</td>
<td align="center">2</td>
</tr>
<tr class="even">
<td align="center">BSV</td>
<td align="center">CCBY4.0</td>
<td align="center">2</td>
</tr>
<tr class="odd">
<td align="center">BSV</td>
<td align="center">LEGACY</td>
<td align="center">2</td>
</tr>
<tr class="even">
<td align="center">DBF</td>
<td align="center">LEGACY</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">CSH</td>
<td align="center">CCBY4.0</td>
<td align="center">6</td>
</tr>
<tr class="even">
<td align="center">CVM</td>
<td align="center">CCBY4.0</td>
<td align="center">2</td>
</tr>
<tr class="odd">
<td align="center">SAV</td>
<td align="center">CCBY4.0</td>
<td align="center">6</td>
</tr>
<tr class="even">
<td align="center">WAT</td>
<td align="center">CCBY4.0</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">URB</td>
<td align="center">LEGACY</td>
<td align="center">2</td>
</tr>
<tr class="even">
<td align="center">SNO</td>
<td align="center">CCBY4.0</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<p>Once decided, users can query a target site list based on the desired criteria, e.g., IGBP, data availability, data policy, geolocation.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># get a list of cropland and grassland sites with available data,</span>
<span class="co">#  shared under CC-BY-4.0 data policy,</span>
<span class="co">#  located within 30-50 degree N in latitude,</span>
<span class="co"># returned a site list with site ID, name, data starting/ending year</span>
<span class="va">crop_ls</span> <span class="op">&lt;-</span> <span class="va">sites_dt</span><span class="op">[</span><span class="va">IGBP</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"CRO"</span>, <span class="st">"GRA"</span><span class="op">)</span> <span class="op">&amp;</span>
                      <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">DATA_START</span><span class="op">)</span> <span class="op">&amp;</span>
                      <span class="va">LOCATION_LAT</span> <span class="op">&gt;</span> <span class="fl">30</span> <span class="op">&amp;</span>
                      <span class="va">LOCATION_LAT</span> <span class="op">&lt;</span> <span class="fl">50</span> <span class="op">&amp;</span>
                      <span class="va">DATA_POLICY</span> <span class="op">==</span> <span class="st">"CCBY4.0"</span>,
                    <span class="fu">.</span><span class="op">(</span><span class="va">SITE_ID</span>, <span class="va">SITE_NAME</span>, <span class="va">DATA_START</span>, <span class="va">DATA_END</span><span class="op">)</span><span class="op">]</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">crop_ls</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>,<span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="41%">
<col width="18%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="center">SITE_ID</th>
<th align="center">SITE_NAME</th>
<th align="center">DATA_START</th>
<th align="center">DATA_END</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">CA-ER1</td>
<td align="center">Elora Research Station</td>
<td align="center">2015</td>
<td align="center">2021</td>
</tr>
<tr class="even">
<td align="center">US-A32</td>
<td align="center">ARM-SGP Medford hay pasture</td>
<td align="center">2015</td>
<td align="center">2017</td>
</tr>
<tr class="odd">
<td align="center">US-A74</td>
<td align="center">ARM SGP milo field</td>
<td align="center">2015</td>
<td align="center">2017</td>
</tr>
<tr class="even">
<td align="center">US-AR1</td>
<td align="center">ARM USDA UNL OSU Woodward Switchgrass 1</td>
<td align="center">2009</td>
<td align="center">2012</td>
</tr>
<tr class="odd">
<td align="center">US-AR2</td>
<td align="center">ARM USDA UNL OSU Woodward Switchgrass 2</td>
<td align="center">2009</td>
<td align="center">2012</td>
</tr>
<tr class="even">
<td align="center">US-ARM</td>
<td align="center">ARM Southern Great Plains site- Lamont</td>
<td align="center">2003</td>
<td align="center">2021</td>
</tr>
<tr class="odd">
<td align="center">US-Bi1</td>
<td align="center">Bouldin Island Alfalfa</td>
<td align="center">2016</td>
<td align="center">2021</td>
</tr>
<tr class="even">
<td align="center">US-Bi2</td>
<td align="center">Bouldin Island corn</td>
<td align="center">2017</td>
<td align="center">2021</td>
</tr>
<tr class="odd">
<td align="center">US-BMM</td>
<td align="center">Bangtail Mountain Meadow</td>
<td align="center">2016</td>
<td align="center">2019</td>
</tr>
<tr class="even">
<td align="center">US-Bo1</td>
<td align="center">Bondville</td>
<td align="center">1996</td>
<td align="center">2008</td>
</tr>
</tbody>
</table>
</div>
<div id="get-metadata-availability" class="section level2">
<h2 class="hasAnchor">
<a href="#get-metadata-availability" class="anchor"></a>Get metadata availability</h2>
<p>In some cases, users may want to know if certain types of metadata are available for the selected sites. The amf_list_metadata() function provides a quick summary of metadata availability before actually downloading the data and metadata.</p>
<p>By default, amf_list_metadata() returns a full site list with the available entries (i.e., counts) for all BADM groups. Check <a href="https://ameriflux.lbl.gov/data/badm/badm-basics/">AmeriFlux webpage</a> for definitions of all BADM groups.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">metadata_aval</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html">as.data.table</a></span><span class="op">(</span><span class="fu"><a href="../reference/amf_list_metadata.html">amf_list_metadata</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">metadata_aval</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="12%">
<col width="27%">
<col width="18%">
<col width="17%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th align="center">SITE_ID</th>
<th align="center">GRP_ACKNOWLEDGEMENT</th>
<th align="center">GRP_CLIM_AVG</th>
<th align="center">GRP_COUNTRY</th>
<th align="center">GRP_DOM_DIST_MGMT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">AR-CCa</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">AR-CCg</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">2</td>
</tr>
<tr class="odd">
<td align="center">AR-TF1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="28%">
<col width="15%">
<col width="13%">
<col width="25%">
<col width="17%">
</colgroup>
<thead><tr class="header">
<th align="center">GRP_FLUX_MEASUREMENTS</th>
<th align="center">GRP_HEADER</th>
<th align="center">GRP_IGBP</th>
<th align="center">GRP_LAND_OWNERSHIP</th>
<th align="center">GRP_LOCATION</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<p>The site_set parameter of the amf_list_metadata() can be used to subset the sites of interest.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">metadata_aval_sub</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html">as.data.table</a></span><span class="op">(</span><span class="fu"><a href="../reference/amf_list_metadata.html">amf_list_metadata</a></span><span class="op">(</span>site_set <span class="op">=</span> <span class="va">crop_ls</span><span class="op">$</span><span class="va">SITE_ID</span><span class="op">)</span><span class="op">)</span>

<span class="co"># down-select cropland &amp; grassland sites by interested BADM group,</span>
<span class="co">#  e.g., canopy height (GRP_HEIGHTC)</span>
<span class="va">crop_ls2</span> <span class="op">&lt;-</span> <span class="va">metadata_aval_sub</span><span class="op">[</span><span class="va">GRP_HEIGHTC</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="fu">.</span><span class="op">(</span><span class="va">SITE_ID</span>, <span class="va">GRP_HEIGHTC</span><span class="op">)</span><span class="op">]</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="op">-</span><span class="va">GRP_HEIGHTC</span><span class="op">)</span><span class="op">]</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">crop_ls2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>, <span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="center">SITE_ID</th>
<th align="center">GRP_HEIGHTC</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">US-Ne2</td>
<td align="center">196</td>
</tr>
<tr class="even">
<td align="center">US-Tw3</td>
<td align="center">162</td>
</tr>
<tr class="odd">
<td align="center">US-Twt</td>
<td align="center">133</td>
</tr>
<tr class="even">
<td align="center">US-Ne3</td>
<td align="center">128</td>
</tr>
<tr class="odd">
<td align="center">US-Ne1</td>
<td align="center">119</td>
</tr>
<tr class="even">
<td align="center">US-Bi1</td>
<td align="center">112</td>
</tr>
<tr class="odd">
<td align="center">US-Var</td>
<td align="center">105</td>
</tr>
<tr class="even">
<td align="center">US-Snd</td>
<td align="center">70</td>
</tr>
<tr class="odd">
<td align="center">US-Bi2</td>
<td align="center">54</td>
</tr>
<tr class="even">
<td align="center">US-ARM</td>
<td align="center">45</td>
</tr>
</tbody>
</table>
</div>
<div id="get-data-availability" class="section level2">
<h2 class="hasAnchor">
<a href="#get-data-availability" class="anchor"></a>Get data availability</h2>
<p>In addition, users can use amf_list_data() to query the availability of specific variables in the data (i.e., flux/met data, so-called BASE data product). The amf_list_data() provides a quick summary of variable availability (per site/year) before downloading the data.</p>
<p>By default, amf_list_data() returns a full site list of variable availability (data percentages per year) for all variables. The site_set parameter of amf_list_data() can be used to subset the sites of interest.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_aval</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html">as.data.table</a></span><span class="op">(</span><span class="fu"><a href="../reference/amf_list_data.html">amf_list_data</a></span><span class="op">(</span>site_set <span class="op">=</span> <span class="va">crop_ls2</span><span class="op">$</span><span class="va">SITE_ID</span><span class="op">)</span><span class="op">)</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">data_aval</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>, <span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="12%">
<col width="14%">
<col width="14%">
<col width="16%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="center">SITE_ID</th>
<th align="center">VARIABLE</th>
<th align="center">BASENAME</th>
<th align="center">GAP_FILLED</th>
<th align="center">Y1990</th>
<th align="center">Y1991</th>
<th align="center">Y1992</th>
<th align="center">Y1993</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">US-AR1</td>
<td align="center">CO2</td>
<td align="center">CO2</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">US-AR1</td>
<td align="center">FC</td>
<td align="center">FC</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">US-AR1</td>
<td align="center">G</td>
<td align="center">G</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">US-AR1</td>
<td align="center">H</td>
<td align="center">H</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">US-AR1</td>
<td align="center">H2O</td>
<td align="center">H2O</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">US-AR1</td>
<td align="center">LE</td>
<td align="center">LE</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">US-AR1</td>
<td align="center">LW_IN</td>
<td align="center">LW_IN</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">US-AR1</td>
<td align="center">LW_OUT</td>
<td align="center">LW_OUT</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">US-AR1</td>
<td align="center">NETRAD</td>
<td align="center">NETRAD</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">US-AR1</td>
<td align="center">P</td>
<td align="center">P</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="center">Y1994</th>
<th align="center">Y1995</th>
<th align="center">Y1996</th>
<th align="center">Y1997</th>
<th align="center">Y1998</th>
<th align="center">Y1999</th>
<th align="center">Y2000</th>
<th align="center">Y2001</th>
<th align="center">Y2002</th>
<th align="center">Y2003</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="center">Y2004</th>
<th align="center">Y2005</th>
<th align="center">Y2006</th>
<th align="center">Y2007</th>
<th align="center">Y2008</th>
<th align="center">Y2009</th>
<th align="center">Y2010</th>
<th align="center">Y2011</th>
<th align="center">Y2012</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.5905</td>
<td align="center">0.9866</td>
<td align="center">0.9941</td>
<td align="center">0.6654</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6082</td>
<td align="center">0.976</td>
<td align="center">0.9886</td>
<td align="center">0.6621</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6421</td>
<td align="center">0.9965</td>
<td align="center">0.9999</td>
<td align="center">0.9961</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6123</td>
<td align="center">0.9867</td>
<td align="center">0.9938</td>
<td align="center">0.6666</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6092</td>
<td align="center">0.971</td>
<td align="center">0.9792</td>
<td align="center">0.6633</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6101</td>
<td align="center">0.9816</td>
<td align="center">0.9936</td>
<td align="center">0.6647</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6416</td>
<td align="center">0.9965</td>
<td align="center">0.9999</td>
<td align="center">0.9961</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6416</td>
<td align="center">0.9965</td>
<td align="center">0.9999</td>
<td align="center">0.9961</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.5447</td>
<td align="center">0.9964</td>
<td align="center">0.9996</td>
<td align="center">0.996</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6422</td>
<td align="center">0.9965</td>
<td align="center">0.9999</td>
<td align="center">0.9961</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="center">Y2013</th>
<th align="center">Y2014</th>
<th align="center">Y2015</th>
<th align="center">Y2016</th>
<th align="center">Y2017</th>
<th align="center">Y2018</th>
<th align="center">Y2019</th>
<th align="center">Y2020</th>
<th align="center">Y2021</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<p>The variable availability can be used to subset sites that have certain variables in specific years. The BASENAME column indicates the variable’s base name (i.e., ignoring position qualifier), and can be used to get a coarse-level variable availability.</p>
<p>See <a href="https://ameriflux.lbl.gov/data/aboutdata/data-variables/">AmeriFlux website</a> for definitions of base names and qualifiers.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># down-select cropland &amp; grassland sites based on the available wind speed (WS) and </span>
<span class="co"># friction velocity (USTAR) data in 2015-2018, regardless their qualifiers</span>
<span class="va">data_aval_sub</span> <span class="op">&lt;-</span> <span class="va">data_aval</span><span class="op">[</span><span class="va">data_aval</span><span class="op">$</span><span class="va">BASENAME</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"WS"</span>,<span class="st">"USTAR"</span><span class="op">)</span>,
                           <span class="fu">.</span><span class="op">(</span><span class="va">SITE_ID</span>, <span class="va">BASENAME</span>, <span class="va">Y2015</span>, <span class="va">Y2016</span>, <span class="va">Y2017</span>, <span class="va">Y2018</span><span class="op">)</span><span class="op">]</span>

<span class="co"># calculate mean availability of WS and USTAR in each site and each year</span>
<span class="va">data_aval_sub</span> <span class="op">&lt;-</span> <span class="va">data_aval_sub</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">.SD</span>, <span class="va">mean</span><span class="op">)</span>, 
                               by <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">SITE_ID</span><span class="op">)</span>,
                               .SDcols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Y2015"</span>, <span class="st">"Y2016"</span>, <span class="st">"Y2017"</span>, <span class="st">"Y2018"</span><span class="op">)</span><span class="op">]</span>

<span class="co"># sub-select sites that have WS and USTAR data for &gt; 75%</span>
<span class="co">#  during 2015-2018</span>
<span class="va">crop_ls3</span> <span class="op">&lt;-</span> <span class="va">data_aval_sub</span><span class="op">[</span><span class="op">(</span><span class="va">Y2015</span> <span class="op">+</span> <span class="va">Y2016</span> <span class="op">+</span> <span class="va">Y2017</span> <span class="op">+</span> <span class="va">Y2018</span><span class="op">)</span> <span class="op">/</span> <span class="fl">4</span> <span class="op">&gt;</span> <span class="fl">0.75</span><span class="op">]</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">crop_ls3</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="center">SITE_ID</th>
<th align="center">Y2015</th>
<th align="center">Y2016</th>
<th align="center">Y2017</th>
<th align="center">Y2018</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">US-ARM</td>
<td align="center">0.5772</td>
<td align="center">0.9871</td>
<td align="center">0.9683</td>
<td align="center">0.9826</td>
</tr>
<tr class="even">
<td align="center">US-Ne1</td>
<td align="center">0.77</td>
<td align="center">0.7861</td>
<td align="center">0.756</td>
<td align="center">0.7167</td>
</tr>
<tr class="odd">
<td align="center">US-Ne2</td>
<td align="center">0.7636</td>
<td align="center">0.7878</td>
<td align="center">0.7594</td>
<td align="center">0.7442</td>
</tr>
<tr class="even">
<td align="center">US-SRG</td>
<td align="center">0.9669</td>
<td align="center">0.9851</td>
<td align="center">0.9775</td>
<td align="center">0.9997</td>
</tr>
<tr class="odd">
<td align="center">US-Tw3</td>
<td align="center">0.9689</td>
<td align="center">0.9569</td>
<td align="center">0.9763</td>
<td align="center">0.4005</td>
</tr>
<tr class="even">
<td align="center">US-Var</td>
<td align="center">0.9983</td>
<td align="center">1</td>
<td align="center">0.9455</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">US-Wkg</td>
<td align="center">0.9973</td>
<td align="center">0.9909</td>
<td align="center">0.9965</td>
<td align="center">0.9848</td>
</tr>
</tbody>
</table>
<p>Last, sometimes users would look for sites with multiple measurements of similar variables (e.g., multilevel wind speed, soil temperature). The VARIABLE column in the variable availability can be used to get a fine-level variable availability.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># down-select cropland &amp; grassland sites by available wind speed (WS) data,</span>
<span class="co">#  mean availability of WS during 2015-2018</span>
<span class="va">data_aval_sub2</span> <span class="op">&lt;-</span> <span class="va">data_aval</span><span class="op">[</span><span class="va">data_aval</span><span class="op">$</span><span class="va">BASENAME</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"WS"</span><span class="op">)</span>,
                            <span class="fu">.</span><span class="op">(</span><span class="va">SITE_ID</span>, <span class="va">VARIABLE</span>, Y2015_2018 <span class="op">=</span> <span class="op">(</span><span class="va">Y2015</span> <span class="op">+</span> <span class="va">Y2016</span> <span class="op">+</span> <span class="va">Y2017</span> <span class="op">+</span> <span class="va">Y2018</span><span class="op">)</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span><span class="op">]</span>

<span class="co"># calculate number of WS variables per site, for sites that </span>
<span class="co">#  have any WS data during 2015-2018</span>
<span class="va">data_aval_sub2</span> <span class="op">&lt;-</span> <span class="va">data_aval_sub2</span><span class="op">[</span><span class="va">Y2015_2018</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="fu">.</span><span class="op">(</span><span class="va">.N</span>, Y2015_2018 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Y2015_2018</span><span class="op">)</span><span class="op">)</span>, <span class="fu">.</span><span class="op">(</span><span class="va">SITE_ID</span><span class="op">)</span><span class="op">]</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">crop_ls4</span> <span class="op">&lt;-</span> <span class="va">data_aval_sub2</span><span class="op">[</span><span class="va">N</span> <span class="op">&gt;</span> <span class="fl">1</span>, <span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="5%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="center">SITE_ID</th>
<th align="center">N</th>
<th align="center">Y2015_2018</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">US-ARM</td>
<td align="center">3</td>
<td align="center">0.8766</td>
</tr>
<tr class="even">
<td align="center">US-Ne1</td>
<td align="center">4</td>
<td align="center">0.7027</td>
</tr>
<tr class="odd">
<td align="center">US-Ne2</td>
<td align="center">4</td>
<td align="center">0.709</td>
</tr>
<tr class="even">
<td align="center">US-Ne3</td>
<td align="center">4</td>
<td align="center">0.7287</td>
</tr>
<tr class="odd">
<td align="center">US-Wkg</td>
<td align="center">2</td>
<td align="center">0.9942</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># return a list of sites with multiple WS variables</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">crop_ls4_aval</span> <span class="op">&lt;-</span> <span class="va">data_aval</span><span class="op">[</span><span class="va">data_aval</span><span class="op">$</span><span class="va">SITE_ID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">crop_ls4</span><span class="op">$</span><span class="va">SITE_ID</span> <span class="op">&amp;</span>
                                                  <span class="va">data_aval</span><span class="op">$</span><span class="va">BASENAME</span> <span class="op">==</span> <span class="st">"WS"</span>,
                                                <span class="fu">.</span><span class="op">(</span><span class="va">SITE_ID</span>, <span class="va">VARIABLE</span>, <span class="va">Y2015</span>, <span class="va">Y2016</span>, <span class="va">Y2017</span>, <span class="va">Y2018</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="15%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="center">SITE_ID</th>
<th align="center">VARIABLE</th>
<th align="center">Y2015</th>
<th align="center">Y2016</th>
<th align="center">Y2017</th>
<th align="center">Y2018</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">US-ARM</td>
<td align="center">WS_1_1_1</td>
<td align="center">0.5807</td>
<td align="center">0.9917</td>
<td align="center">0.9888</td>
<td align="center">0.9832</td>
</tr>
<tr class="even">
<td align="center">US-ARM</td>
<td align="center">WS_1_2_1</td>
<td align="center">0.5785</td>
<td align="center">0.9854</td>
<td align="center">0.985</td>
<td align="center">0.9839</td>
</tr>
<tr class="odd">
<td align="center">US-ARM</td>
<td align="center">WS_1_3_1</td>
<td align="center">0.5656</td>
<td align="center">0.9778</td>
<td align="center">0.9241</td>
<td align="center">0.9743</td>
</tr>
<tr class="even">
<td align="center">US-Ne1</td>
<td align="center">WS_1_1_1</td>
<td align="center">0.3371</td>
<td align="center">0.2353</td>
<td align="center">0.3507</td>
<td align="center">0.3699</td>
</tr>
<tr class="odd">
<td align="center">US-Ne1</td>
<td align="center">WS_1_2_1</td>
<td align="center">0.9719</td>
<td align="center">0.9512</td>
<td align="center">0.8829</td>
<td align="center">0.8158</td>
</tr>
<tr class="even">
<td align="center">US-Ne1</td>
<td align="center">WS_1_3_1</td>
<td align="center">0.9677</td>
<td align="center">0.9796</td>
<td align="center">0.9</td>
<td align="center">0.7745</td>
</tr>
<tr class="odd">
<td align="center">US-Ne1</td>
<td align="center">WS_2_1_1</td>
<td align="center">0.6629</td>
<td align="center">0.7647</td>
<td align="center">0.6493</td>
<td align="center">0.6301</td>
</tr>
<tr class="even">
<td align="center">US-Ne2</td>
<td align="center">WS_1_1_1</td>
<td align="center">0.3401</td>
<td align="center">0</td>
<td align="center">0.3395</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">US-Ne2</td>
<td align="center">WS_1_2_1</td>
<td align="center">0.9705</td>
<td align="center">0.9738</td>
<td align="center">0.8905</td>
<td align="center">0.8274</td>
</tr>
<tr class="even">
<td align="center">US-Ne2</td>
<td align="center">WS_1_3_1</td>
<td align="center">0.9058</td>
<td align="center">0.9671</td>
<td align="center">0.9098</td>
<td align="center">0.8992</td>
</tr>
<tr class="odd">
<td align="center">US-Ne2</td>
<td align="center">WS_2_1_1</td>
<td align="center">0.6599</td>
<td align="center">1</td>
<td align="center">0.6605</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">US-Ne3</td>
<td align="center">WS_1_1_1</td>
<td align="center">0.3428</td>
<td align="center">0</td>
<td align="center">0.3453</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">US-Ne3</td>
<td align="center">WS_1_2_1</td>
<td align="center">0.9812</td>
<td align="center">0.9915</td>
<td align="center">0.9709</td>
<td align="center">0.9509</td>
</tr>
<tr class="even">
<td align="center">US-Ne3</td>
<td align="center">WS_1_3_1</td>
<td align="center">0.9473</td>
<td align="center">0.9752</td>
<td align="center">0.9131</td>
<td align="center">0.9293</td>
</tr>
<tr class="odd">
<td align="center">US-Ne3</td>
<td align="center">WS_2_1_1</td>
<td align="center">0.6572</td>
<td align="center">1</td>
<td align="center">0.6547</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">US-Wkg</td>
<td align="center">WS_1_1_1</td>
<td align="center">0.9962</td>
<td align="center">0.9864</td>
<td align="center">0.995</td>
<td align="center">0.9772</td>
</tr>
<tr class="odd">
<td align="center">US-Wkg</td>
<td align="center">WS_1_2_1</td>
<td align="center">0.9995</td>
<td align="center">1</td>
<td align="center">0.9993</td>
<td align="center">0.9999</td>
</tr>
</tbody>
</table>
<p>Once having a target site list, users can download these sites’ data and metadata using the site IDs. See <a href="data_import.html">Data import</a> for data download and import examples.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Housen Chu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
