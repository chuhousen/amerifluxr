<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Site selection • amerifluxr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Site selection">
<meta property="og:description" content="amerifluxr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">amerifluxr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/data_import.html">Data Import</a>
    </li>
    <li>
      <a href="../articles/site_selection.html">Site selection</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/chuhousen/amerifluxr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="site_selection_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Site selection</h1>
                        <h4 class="author">Housen Chu</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/chuhousen/amerifluxr/blob/master/vignettes/site_selection.Rmd"><code>vignettes/site_selection.Rmd</code></a></small>
      <div class="hidden name"><code>site_selection.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/chuhousen/amerifluxr">amerifluxr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com">data.table</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://rapporter.github.io/pander">pander</a></span><span class="op">)</span></code></pre></div>
<p>amerifluxr is a programmatic interface to the <a href="https://ameriflux.lbl.gov/">AmeriFlux</a>. This vignette demonstrates examples to query a list of target sites based on sites’ general information and availability of metadata and data.</p>
<div id="get-a-site-list-with-general-info" class="section level2">
<h2 class="hasAnchor">
<a href="#get-a-site-list-with-general-info" class="anchor"></a>Get a site list with general info</h2>
<p>A full list of AmeriFlux sites with general info can be obtained using the amf_site_info() function. Convert the site list to a data.table for easier manipulation.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get a full list of sites with general info</span>
<span class="va">sites</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/amf_site_info.html">amf_site_info</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">sites_dt</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html">as.data.table</a></span><span class="op">(</span><span class="va">sites</span><span class="op">)</span>

<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">sites_dt</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>, <span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="13%">
<col width="39%">
<col width="16%">
<col width="20%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="center">SITE_ID</th>
<th align="center">SITE_NAME</th>
<th align="center">COUNTRY</th>
<th align="center">STATE</th>
<th align="center">IGBP</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">AR-CCa</td>
<td align="center">Carlos Casares agriculture</td>
<td align="center">Argentina</td>
<td align="center">Buenos Aires</td>
<td align="center">CRO</td>
</tr>
<tr class="even">
<td align="center">AR-CCg</td>
<td align="center">Carlos Casares grassland</td>
<td align="center">Argentina</td>
<td align="center">Buenos Aires</td>
<td align="center">GRA</td>
</tr>
<tr class="odd">
<td align="center">AR-TF1</td>
<td align="center">Rio Moat bog</td>
<td align="center">Argentina</td>
<td align="center">NA</td>
<td align="center">WET</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="18%">
<col width="65%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th align="center">TOWER_BEGAN</th>
<th align="center">URL_AMERIFLUX</th>
<th align="center">TOWER_END</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">2012</td>
<td align="center"><a href="https://ameriflux.lbl.gov/sites/siteinfo/AR-CCa" class="uri">https://ameriflux.lbl.gov/sites/siteinfo/AR-CCa</a></td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">2018</td>
<td align="center"><a href="https://ameriflux.lbl.gov/sites/siteinfo/AR-CCg" class="uri">https://ameriflux.lbl.gov/sites/siteinfo/AR-CCg</a></td>
<td align="center">NA</td>
</tr>
<tr class="odd">
<td align="center">2016</td>
<td align="center"><a href="https://ameriflux.lbl.gov/sites/siteinfo/AR-TF1" class="uri">https://ameriflux.lbl.gov/sites/siteinfo/AR-TF1</a></td>
<td align="center">2018</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="18%">
<col width="20%">
<col width="20%">
<col width="22%">
<col width="8%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="center">LOCATION_LAT</th>
<th align="center">LOCATION_LONG</th>
<th align="center">LOCATION_ELEV</th>
<th align="center">CLIMATE_KOEPPEN</th>
<th align="center">MAT</th>
<th align="center">MAP</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">-35.62</td>
<td align="center">-61.32</td>
<td align="center">83</td>
<td align="center">Cfa</td>
<td align="center">16.1</td>
<td align="center">1060</td>
</tr>
<tr class="even">
<td align="center">-35.92</td>
<td align="center">-61.19</td>
<td align="center">84</td>
<td align="center">Cfa</td>
<td align="center">16.1</td>
<td align="center">1060</td>
</tr>
<tr class="odd">
<td align="center">-54.97</td>
<td align="center">-66.73</td>
<td align="center">40</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="19%">
<col width="18%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="center">DATA_POLICY</th>
<th align="center">DATA_START</th>
<th align="center">DATA_END</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">LEGACY</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">LEGACY</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="odd">
<td align="center">CCBY4.0</td>
<td align="center">2016</td>
<td align="center">2018</td>
</tr>
</tbody>
</table>
<p>Select sites based on general info, e.g., IGBP, data availability, geo-location.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get a summary table of sites grouped by IGBP</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">sites_dt</span><span class="op">[</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="st">"IGBP"</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="9%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="center">IGBP</th>
<th align="center">N</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">CRO</td>
<td align="center">109</td>
</tr>
<tr class="even">
<td align="center">GRA</td>
<td align="center">78</td>
</tr>
<tr class="odd">
<td align="center">WET</td>
<td align="center">93</td>
</tr>
<tr class="even">
<td align="center">DNF</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">EBF</td>
<td align="center">10</td>
</tr>
<tr class="even">
<td align="center">WSA</td>
<td align="center">9</td>
</tr>
<tr class="odd">
<td align="center">ENF</td>
<td align="center">99</td>
</tr>
<tr class="even">
<td align="center">DBF</td>
<td align="center">58</td>
</tr>
<tr class="odd">
<td align="center">MF</td>
<td align="center">14</td>
</tr>
<tr class="even">
<td align="center">OSH</td>
<td align="center">38</td>
</tr>
<tr class="odd">
<td align="center">WAT</td>
<td align="center">9</td>
</tr>
<tr class="even">
<td align="center">CSH</td>
<td align="center">12</td>
</tr>
<tr class="odd">
<td align="center">URB</td>
<td align="center">8</td>
</tr>
<tr class="even">
<td align="center">BSV</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">SAV</td>
<td align="center">8</td>
</tr>
<tr class="even">
<td align="center">CVM</td>
<td align="center">5</td>
</tr>
<tr class="odd">
<td align="center">SNO</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># get a summary table of sites with available data, &amp; grouped by IGBP</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">sites_dt</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">DATA_START</span><span class="op">)</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="st">"IGBP"</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="9%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="center">IGBP</th>
<th align="center">N</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">WET</td>
<td align="center">50</td>
</tr>
<tr class="even">
<td align="center">DNF</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">WSA</td>
<td align="center">7</td>
</tr>
<tr class="even">
<td align="center">EBF</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">ENF</td>
<td align="center">93</td>
</tr>
<tr class="even">
<td align="center">DBF</td>
<td align="center">54</td>
</tr>
<tr class="odd">
<td align="center">MF</td>
<td align="center">12</td>
</tr>
<tr class="even">
<td align="center">CRO</td>
<td align="center">63</td>
</tr>
<tr class="odd">
<td align="center">GRA</td>
<td align="center">61</td>
</tr>
<tr class="even">
<td align="center">OSH</td>
<td align="center">31</td>
</tr>
<tr class="odd">
<td align="center">CSH</td>
<td align="center">11</td>
</tr>
<tr class="even">
<td align="center">BSV</td>
<td align="center">4</td>
</tr>
<tr class="odd">
<td align="center">CVM</td>
<td align="center">2</td>
</tr>
<tr class="even">
<td align="center">SAV</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">WAT</td>
<td align="center">6</td>
</tr>
<tr class="even">
<td align="center">URB</td>
<td align="center">2</td>
</tr>
<tr class="odd">
<td align="center">SNO</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># get a list of cropland and grassland sites with available data, located within 30-50 degree N in latitude</span>
<span class="va">crop_ls</span> <span class="op">&lt;-</span> <span class="va">sites_dt</span><span class="op">[</span><span class="va">IGBP</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"CRO"</span>, <span class="st">"GRA"</span><span class="op">)</span> <span class="op">&amp;</span>
                                           <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">DATA_START</span><span class="op">)</span> <span class="op">&amp;</span>
                                           <span class="va">LOCATION_LAT</span> <span class="op">&gt;</span> <span class="fl">30</span> <span class="op">&amp;</span>
                                           <span class="va">LOCATION_LAT</span> <span class="op">&lt;</span> <span class="fl">50</span>,
                                         <span class="fu">.</span><span class="op">(</span><span class="va">SITE_ID</span>, <span class="va">SITE_NAME</span>, <span class="va">DATA_START</span>, <span class="va">DATA_END</span><span class="op">)</span><span class="op">]</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">crop_ls</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>, <span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="45%">
<col width="18%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="center">SITE_ID</th>
<th align="center">SITE_NAME</th>
<th align="center">DATA_START</th>
<th align="center">DATA_END</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">CA-ER1</td>
<td align="center">Elora Research Station</td>
<td align="center">2015</td>
<td align="center">2021</td>
</tr>
<tr class="even">
<td align="center">CA-Let</td>
<td align="center">Alberta - Mixed Grass Prairie</td>
<td align="center">1998</td>
<td align="center">2008</td>
</tr>
<tr class="odd">
<td align="center">US-A32</td>
<td align="center">ARM-SGP Medford hay pasture</td>
<td align="center">2015</td>
<td align="center">2017</td>
</tr>
<tr class="even">
<td align="center">US-A74</td>
<td align="center">ARM SGP milo field</td>
<td align="center">2015</td>
<td align="center">2017</td>
</tr>
<tr class="odd">
<td align="center">US-AR1</td>
<td align="center">ARM USDA UNL OSU Woodward Switchgrass 1</td>
<td align="center">2009</td>
<td align="center">2012</td>
</tr>
<tr class="even">
<td align="center">US-AR2</td>
<td align="center">ARM USDA UNL OSU Woodward Switchgrass 2</td>
<td align="center">2009</td>
<td align="center">2012</td>
</tr>
<tr class="odd">
<td align="center">US-ARb</td>
<td align="center">ARM Southern Great Plains burn site- Lamont</td>
<td align="center">2005</td>
<td align="center">2006</td>
</tr>
<tr class="even">
<td align="center">US-ARc</td>
<td align="center">ARM Southern Great Plains control site- Lamont</td>
<td align="center">2005</td>
<td align="center">2006</td>
</tr>
<tr class="odd">
<td align="center">US-ARM</td>
<td align="center">ARM Southern Great Plains site- Lamont</td>
<td align="center">2003</td>
<td align="center">2021</td>
</tr>
<tr class="even">
<td align="center">US-Aud</td>
<td align="center">Audubon Research Ranch</td>
<td align="center">2002</td>
<td align="center">2011</td>
</tr>
</tbody>
</table>
</div>
<div id="get-metadata-availability" class="section level2">
<h2 class="hasAnchor">
<a href="#get-metadata-availability" class="anchor"></a>Get metadata availability</h2>
<p>In some cases, users may want to know if certain types of metadata are available for the selected sites. The amf_metadata_aval() function provides a quick summary of metadata availability before actually downloading the data &amp; metadata through AmeriFlux. By default, amf_metadata_aval() returns a full site list with the available entries (i.e., counts) for all BADM groups. Check <a href="https://ameriflux.lbl.gov/data/badm/badm-basics/">AmeriFlux webpage</a> for definitions of BADM groups.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">metadata_aval</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html">as.data.table</a></span><span class="op">(</span><span class="fu"><a href="../reference/amf_metadata_aval.html">amf_metadata_aval</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">metadata_aval</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="12%">
<col width="27%">
<col width="18%">
<col width="17%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th align="center">SITE_ID</th>
<th align="center">GRP_ACKNOWLEDGEMENT</th>
<th align="center">GRP_CLIM_AVG</th>
<th align="center">GRP_COUNTRY</th>
<th align="center">GRP_DOM_DIST_MGMT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">AR-CCa</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">AR-CCg</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">2</td>
</tr>
<tr class="odd">
<td align="center">AR-TF1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="28%">
<col width="15%">
<col width="13%">
<col width="25%">
<col width="17%">
</colgroup>
<thead><tr class="header">
<th align="center">GRP_FLUX_MEASUREMENTS</th>
<th align="center">GRP_HEADER</th>
<th align="center">GRP_IGBP</th>
<th align="center">GRP_LAND_OWNERSHIP</th>
<th align="center">GRP_LOCATION</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<p>The site_set parameter of the amf_metadata_aval() can be used to subset the sites of interest.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">metadata_aval_sub</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html">as.data.table</a></span><span class="op">(</span><span class="fu"><a href="../reference/amf_metadata_aval.html">amf_metadata_aval</a></span><span class="op">(</span>site_set <span class="op">=</span> <span class="va">crop_ls</span><span class="op">$</span><span class="va">SITE_ID</span><span class="op">)</span><span class="op">)</span>

<span class="co"># down-select cropland &amp; grassland sites based on the interested BADM group, e.g., canopy height (GRP_HEIGHTC)</span>
<span class="va">crop_ls2</span> <span class="op">&lt;-</span> <span class="va">metadata_aval_sub</span><span class="op">[</span><span class="va">GRP_HEIGHTC</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="fu">.</span><span class="op">(</span><span class="va">SITE_ID</span>, <span class="va">GRP_HEIGHTC</span><span class="op">)</span><span class="op">]</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="op">-</span><span class="va">GRP_HEIGHTC</span><span class="op">)</span><span class="op">]</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">crop_ls2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>, <span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="center">SITE_ID</th>
<th align="center">GRP_HEIGHTC</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">US-Ne2</td>
<td align="center">196</td>
</tr>
<tr class="even">
<td align="center">US-Tw3</td>
<td align="center">162</td>
</tr>
<tr class="odd">
<td align="center">US-Twt</td>
<td align="center">133</td>
</tr>
<tr class="even">
<td align="center">US-Ne3</td>
<td align="center">128</td>
</tr>
<tr class="odd">
<td align="center">US-Ne1</td>
<td align="center">119</td>
</tr>
<tr class="even">
<td align="center">US-Bi1</td>
<td align="center">112</td>
</tr>
<tr class="odd">
<td align="center">US-IB2</td>
<td align="center">105</td>
</tr>
<tr class="even">
<td align="center">US-Var</td>
<td align="center">105</td>
</tr>
<tr class="odd">
<td align="center">US-Shd</td>
<td align="center">84</td>
</tr>
<tr class="even">
<td align="center">US-Snd</td>
<td align="center">70</td>
</tr>
</tbody>
</table>
</div>
<div id="get-data-availability" class="section level2">
<h2 class="hasAnchor">
<a href="#get-data-availability" class="anchor"></a>Get data availability</h2>
<p>In addition, users can use amf_data_aval() function to query the availability of specific variables in the data. The amf_data_aval() functions provide a quick summary of variable availability (per site/year) before downloading the data through AmeriFlux. By default, amf_data_aval() returns a full site list of variable availability (per year) for all variables. The site_set parameter of amf_data_aval() can be used to subset the sites of interest.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_aval</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html">as.data.table</a></span><span class="op">(</span><span class="fu"><a href="../reference/amf_data_aval.html">amf_data_aval</a></span><span class="op">(</span>site_set <span class="op">=</span> <span class="va">crop_ls2</span><span class="op">$</span><span class="va">SITE_ID</span><span class="op">)</span><span class="op">)</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">data_aval</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>, <span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="12%">
<col width="15%">
<col width="15%">
<col width="16%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="center">SITE_ID</th>
<th align="center">VARIABLE</th>
<th align="center">BASENAME</th>
<th align="center">GAP_FILLED</th>
<th align="center">Y1990</th>
<th align="center">Y1991</th>
<th align="center">Y1992</th>
<th align="center">Y1993</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">CA-Let</td>
<td align="center">CO2</td>
<td align="center">CO2</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">CA-Let</td>
<td align="center">G_1_1_1</td>
<td align="center">G</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">CA-Let</td>
<td align="center">G_1_1_2</td>
<td align="center">G</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">CA-Let</td>
<td align="center">G_1_1_3</td>
<td align="center">G</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">CA-Let</td>
<td align="center">G_1_1_4</td>
<td align="center">G</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">CA-Let</td>
<td align="center">H</td>
<td align="center">H</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">CA-Let</td>
<td align="center">H2O</td>
<td align="center">H2O</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">CA-Let</td>
<td align="center">LE</td>
<td align="center">LE</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">CA-Let</td>
<td align="center">MO_LENGTH</td>
<td align="center">MO_LENGTH</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">CA-Let</td>
<td align="center">NEE_PI</td>
<td align="center">NEE</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="center">Y1994</th>
<th align="center">Y1995</th>
<th align="center">Y1996</th>
<th align="center">Y1997</th>
<th align="center">Y1998</th>
<th align="center">Y1999</th>
<th align="center">Y2000</th>
<th align="center">Y2001</th>
<th align="center">Y2002</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.4426</td>
<td align="center">0.8072</td>
<td align="center">0.8735</td>
<td align="center">0.9502</td>
<td align="center">0.9189</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.5163</td>
<td align="center">0.9894</td>
<td align="center">0.9665</td>
<td align="center">0.9944</td>
<td align="center">0.983</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.5163</td>
<td align="center">0.9894</td>
<td align="center">0.9666</td>
<td align="center">0.9944</td>
<td align="center">0.983</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.4398</td>
<td align="center">0.8318</td>
<td align="center">0.8799</td>
<td align="center">0.948</td>
<td align="center">0.9216</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.4426</td>
<td align="center">0.8072</td>
<td align="center">0.8753</td>
<td align="center">0.9502</td>
<td align="center">0.9182</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.4405</td>
<td align="center">0.7624</td>
<td align="center">0.864</td>
<td align="center">0.9429</td>
<td align="center">0.9102</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.4416</td>
<td align="center">0.8336</td>
<td align="center">0.8815</td>
<td align="center">0.955</td>
<td align="center">0.9229</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.4404</td>
<td align="center">0.7568</td>
<td align="center">0.864</td>
<td align="center">0.9429</td>
<td align="center">0.911</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="11%">
<col width="11%">
<col width="14%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="9%">
<col width="9%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="center">Y2003</th>
<th align="center">Y2004</th>
<th align="center">Y2005</th>
<th align="center">Y2006</th>
<th align="center">Y2007</th>
<th align="center">Y2008</th>
<th align="center">Y2009</th>
<th align="center">Y2010</th>
<th align="center">Y2011</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">0.9108</td>
<td align="center">0.9792</td>
<td align="center">0.9225</td>
<td align="center">0.9756</td>
<td align="center">0.9905</td>
<td align="center">0.246</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0.9638</td>
<td align="center">1</td>
<td align="center">0.992</td>
<td align="center">0.9916</td>
<td align="center">1</td>
<td align="center">0.2485</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0.9638</td>
<td align="center">1</td>
<td align="center">0.992</td>
<td align="center">0.9916</td>
<td align="center">1</td>
<td align="center">0.2485</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">5.708e-05</td>
<td align="center">0.9916</td>
<td align="center">1</td>
<td align="center">0.2485</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">5.708e-05</td>
<td align="center">0.9916</td>
<td align="center">1</td>
<td align="center">0.2485</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0.8836</td>
<td align="center">0.9607</td>
<td align="center">0.9879</td>
<td align="center">0.9756</td>
<td align="center">0.9811</td>
<td align="center">0.2456</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0.912</td>
<td align="center">0.9797</td>
<td align="center">0.9913</td>
<td align="center">0.9756</td>
<td align="center">0.9912</td>
<td align="center">0.246</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0.8811</td>
<td align="center">0.9574</td>
<td align="center">0.988</td>
<td align="center">0.9701</td>
<td align="center">0.9811</td>
<td align="center">0.2456</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0.886</td>
<td align="center">0.9623</td>
<td align="center">0.9878</td>
<td align="center">0.9756</td>
<td align="center">0.9864</td>
<td align="center">0.2455</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0.8807</td>
<td align="center">0.9573</td>
<td align="center">0.9881</td>
<td align="center">0.9698</td>
<td align="center">0.9811</td>
<td align="center">0.2455</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="center">Y2012</th>
<th align="center">Y2013</th>
<th align="center">Y2014</th>
<th align="center">Y2015</th>
<th align="center">Y2016</th>
<th align="center">Y2017</th>
<th align="center">Y2018</th>
<th align="center">Y2019</th>
<th align="center">Y2020</th>
<th align="center">Y2021</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<p>The variable availability can be used to subset sites that have certain variables in specific years. The BASENAME column in the variable availability indicates the variable’s base name (i.e., ignoring position qualifier), and can be used to get a coarse-level variable availability. See <a href="https://ameriflux.lbl.gov/data/aboutdata/data-variables/">AmeriFlux website</a> for definitions of base names and qualifiers.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># down-select cropland &amp; grassland sites based on the available wind speed (WS) and </span>
<span class="co"># friction velocity (USTAR) data in 2015-2018</span>
<span class="va">data_aval_sub</span> <span class="op">&lt;-</span> <span class="va">data_aval</span><span class="op">[</span><span class="va">data_aval</span><span class="op">$</span><span class="va">BASENAME</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"WS"</span>,<span class="st">"USTAR"</span><span class="op">)</span>,
                           <span class="fu">.</span><span class="op">(</span><span class="va">SITE_ID</span>, <span class="va">BASENAME</span>, <span class="va">Y2015</span>, <span class="va">Y2016</span>, <span class="va">Y2017</span>, <span class="va">Y2018</span><span class="op">)</span><span class="op">]</span>

<span class="co"># calculate mean availability of WS and USTAR in each site and each year</span>
<span class="va">data_aval_sub</span> <span class="op">&lt;-</span> <span class="va">data_aval_sub</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">.SD</span>, <span class="va">mean</span><span class="op">)</span>, 
                               by <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">SITE_ID</span><span class="op">)</span>,
                               .SDcols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Y2015"</span>, <span class="st">"Y2016"</span>, <span class="st">"Y2017"</span>, <span class="st">"Y2018"</span><span class="op">)</span><span class="op">]</span>

<span class="co"># sub-select sites that have WS and USTAR data during any periods of 2015-2018</span>
<span class="va">crop_ls3</span> <span class="op">&lt;-</span> <span class="va">data_aval_sub</span><span class="op">[</span><span class="op">(</span><span class="va">Y2015</span> <span class="op">+</span> <span class="va">Y2016</span> <span class="op">+</span> <span class="va">Y2017</span> <span class="op">+</span> <span class="va">Y2018</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">]</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">crop_ls3</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="center">SITE_ID</th>
<th align="center">Y2015</th>
<th align="center">Y2016</th>
<th align="center">Y2017</th>
<th align="center">Y2018</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">US-ARM</td>
<td align="center">0.5772</td>
<td align="center">0.9871</td>
<td align="center">0.9683</td>
<td align="center">0.9826</td>
</tr>
<tr class="even">
<td align="center">US-Bi1</td>
<td align="center">0</td>
<td align="center">0.3851</td>
<td align="center">0.9999</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">US-Bi2</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6472</td>
<td align="center">0.9943</td>
</tr>
<tr class="even">
<td align="center">US-IB2</td>
<td align="center">0.9258</td>
<td align="center">0.9971</td>
<td align="center">0.9815</td>
<td align="center">0.9805</td>
</tr>
<tr class="odd">
<td align="center">US-Ne1</td>
<td align="center">0.77</td>
<td align="center">0.7861</td>
<td align="center">0.756</td>
<td align="center">0.7167</td>
</tr>
<tr class="even">
<td align="center">US-Ne2</td>
<td align="center">0.7636</td>
<td align="center">0.7878</td>
<td align="center">0.7594</td>
<td align="center">0.7442</td>
</tr>
<tr class="odd">
<td align="center">US-Ne3</td>
<td align="center">0.65</td>
<td align="center">0.7643</td>
<td align="center">0.7759</td>
<td align="center">0.7739</td>
</tr>
<tr class="even">
<td align="center">US-SRG</td>
<td align="center">0.9669</td>
<td align="center">0.9851</td>
<td align="center">0.9775</td>
<td align="center">0.9997</td>
</tr>
<tr class="odd">
<td align="center">US-Tw3</td>
<td align="center">0.9689</td>
<td align="center">0.9569</td>
<td align="center">0.9763</td>
<td align="center">0.4005</td>
</tr>
<tr class="even">
<td align="center">US-Twt</td>
<td align="center">0.9957</td>
<td align="center">0.966</td>
<td align="center">0.2345</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">US-Var</td>
<td align="center">0.9983</td>
<td align="center">1</td>
<td align="center">0.9455</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">US-Wkg</td>
<td align="center">0.9973</td>
<td align="center">0.9909</td>
<td align="center">0.9965</td>
<td align="center">0.9848</td>
</tr>
</tbody>
</table>
<p>Last, sometimes users would look for sites with multiple measurements of similar variables (e.g., multilevel wind speed). The VARIABLE column in the variable availability can be used to get a fine-level variable availability.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># down-select cropland &amp; grassland sites based on the available wind speed (WS) data,</span>
<span class="co">#  mean availability of WS during 2015-2018</span>
<span class="va">data_aval_sub2</span> <span class="op">&lt;-</span> <span class="va">data_aval</span><span class="op">[</span><span class="va">data_aval</span><span class="op">$</span><span class="va">BASENAME</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"WS"</span><span class="op">)</span>,
                            <span class="fu">.</span><span class="op">(</span><span class="va">SITE_ID</span>, <span class="va">VARIABLE</span>, Y2015_2018 <span class="op">=</span> <span class="op">(</span><span class="va">Y2015</span> <span class="op">+</span> <span class="va">Y2016</span> <span class="op">+</span> <span class="va">Y2017</span> <span class="op">+</span> <span class="va">Y2018</span><span class="op">)</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span><span class="op">]</span>

<span class="co"># calculate number of WS variables per site, for sites that have any WS data during 2015-2018</span>
<span class="va">data_aval_sub2</span> <span class="op">&lt;-</span> <span class="va">data_aval_sub2</span><span class="op">[</span><span class="va">Y2015_2018</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="fu">.</span><span class="op">(</span><span class="va">.N</span>, Y2015_2018 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Y2015_2018</span><span class="op">)</span><span class="op">)</span>, <span class="fu">.</span><span class="op">(</span><span class="va">SITE_ID</span><span class="op">)</span><span class="op">]</span>
<span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span><span class="va">crop_ls4</span> <span class="op">&lt;-</span> <span class="va">data_aval_sub2</span><span class="op">[</span><span class="va">N</span> <span class="op">&gt;</span> <span class="fl">1</span>, <span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="5%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="center">SITE_ID</th>
<th align="center">N</th>
<th align="center">Y2015_2018</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">US-ARM</td>
<td align="center">3</td>
<td align="center">0.8766</td>
</tr>
<tr class="even">
<td align="center">US-Ne1</td>
<td align="center">4</td>
<td align="center">0.7027</td>
</tr>
<tr class="odd">
<td align="center">US-Ne2</td>
<td align="center">4</td>
<td align="center">0.709</td>
</tr>
<tr class="even">
<td align="center">US-Ne3</td>
<td align="center">4</td>
<td align="center">0.7287</td>
</tr>
<tr class="odd">
<td align="center">US-Wkg</td>
<td align="center">2</td>
<td align="center">0.9942</td>
</tr>
</tbody>
</table>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Housen Chu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
